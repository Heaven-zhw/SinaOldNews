# SinaOldNews
爬取过去某个时间段的新浪新闻

## 需求说明
本项目目的是为了获取带标签的样本集，对一段时间内的旧新闻进行爬取，主要获取财经、科技、体育等7个版块的新闻。

## 流程说明
程序主要分两大部分：爬取新闻链接和爬取文本内容。先找到有个新浪新闻的新闻回顾界面，如 http://news.sina.com.cn/head/news20050826am.shtml
这个页面就是新浪把当天某时段的各版块的头条新闻缓存了一下，虽然只是核心要闻，但如果按照日期一天天的抓取，数量也是足够了。
上面的网址中20050826是日期，am是上午的缓存，也可以改成pm，代表下午的缓存。
通过尝试，可以看到最早的新闻回顾网页是 http://news.sina.com.cn/head/news20010822am.shtml
这样我们可以通过日期递增或递减爬取一段时间的新闻了。
对每一页的链接，用正则匹配出符合要求的版块的链接，存入数据表。

爬取链接完成后是爬取内容，其流程是先读取存URL的数据表中未爬取过内容（标志位为0）的链接，爬取内容后保存文本内容至另一张数据表中，并修改标志位。

## 使用说明
Python3下安装代码里相应的第三方库，在某MySQL数据库下新建查询，运行createDB.sql中建立两张数据表的语句，
修改store.py头部的数据库配置，然后在urldetect.py里按格式指定时间段，运行urldetect.py即可获取新闻链接，
待存在一定数量的链接后运行textdetect.py，即可获取新闻内容。
